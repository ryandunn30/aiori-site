<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AIORI Early Access Registration</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="page-container">
    <div id="register-box">
      <!-- Logo replaces the text heading -->
      <img src="aiori_logo_FULL_WT_BG-05.png" alt="AIORI Logo" style="max-width: 100%; height: auto; margin-bottom: 1rem;" />
      
      <form id="register-form" onsubmit="return false;" novalidate>
        <input type="text" id="name" name="name" placeholder="Name" required autocomplete="name" />
        <input type="tel" id="phone" name="phone" placeholder="Phone Number" required autocomplete="tel" />
        <input type="email" id="email" name="email" placeholder="Email Address" required autocomplete="email" />
        <button type="submit" id="submit-btn">Submit</button>
      </form>
    </div>
  </div>

  <!-- Thank You popup -->
  <div id="thank-you-popup" role="dialog" aria-modal="true" aria-labelledby="thank-you-title">
    <div class="popup-content">
      <h3 id="thank-you-title">Thank You for Registering!</h3>
      <button id="close-popup-btn">Close</button>
    </div>
  </div>

<script>
window.addEventListener('DOMContentLoaded', () => {
  const FORM_URL = 'https://script.google.com/macros/s/AKfycbx5HFT6Ho22GAQ0eQR4LL7WFh0y-eVciIpgaVKvHc_ImytVoQWRvY8E3l_9kkKU7aLgLg/exec';

  const form         = document.getElementById('register-form');
  const thankYou     = document.getElementById('thank-you-popup');
  const closePopup   = document.getElementById('close-popup-btn');

  form.addEventListener('submit', async e => {
    e.preventDefault(); // (just in case)
    // collect the field values
    const payload = {
      name:  form.name.value.trim(),
      phone: form.phone.value.trim(),
      email: form.email.value.trim(),
    };

    try {
      const res  = await fetch(FORM_URL, {
        method:  'POST',
        headers: { 'Content-Type': 'application/json' },
        body:    JSON.stringify(payload),
      });
      const json = await res.json();
      if (json.status === 'success') {
        thankYou.style.display = 'flex';
      } else {
        throw new Error(json.message || 'Unknown error');
      }
    } catch (err) {
      console.error('Submit error:', err);
      alert('Submission failed. Please try again.');
    }
  });

  closePopup.addEventListener('click', () => {
    thankYou.style.display = 'none';
    form.reset();
  });
});
</script>
</body>
</html>